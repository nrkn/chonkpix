import { layoutTextLine, textLayoutToIndices } from '../../lib/bmpfont/layout.js';
import { createColor } from '../../lib/image/color.js';
import { fill, fillIndices } from '../../lib/image/fill.js';
export const drawFps = (state, font, width, buffer, fontPts) => {
    const padding = 2;
    const frameTime = state.time.getFrameTime();
    const fps = Math.round(1000 / frameTime);
    const fpsText = `${fps} fps (${frameTime.toFixed(1)}ms)`;
    const fpsW = font.width * fpsText.length + padding * 2;
    const fpsH = font.height + padding * 2;
    const fpsX = width - fpsW - padding;
    const fpsY = padding;
    const fpsBg = createColor(0x00, 0x78, 0xd4);
    const fpsFg = createColor(0xff, 0xd7, 0x00);
    fill(buffer, fpsBg, [fpsX, fpsY, fpsW, fpsH]);
    const fpsLayout = layoutTextLine(font, fpsText);
    const fpsIndices = textLayoutToIndices(buffer, fpsX + padding, fpsY + padding, fontPts, fpsLayout);
    fillIndices(fpsIndices, buffer, fpsFg);
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnBzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL3NjZW5lcy9yYW5nZXIvZnBzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCxjQUFjLEVBQUUsbUJBQW1CLEVBQ3BDLE1BQU0sNkJBQTZCLENBQUE7QUFFcEMsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLDBCQUEwQixDQUFBO0FBQ3RELE9BQU8sRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFLE1BQU0seUJBQXlCLENBQUE7QUFHM0QsTUFBTSxDQUFDLE1BQU0sT0FBTyxHQUFHLENBQ3JCLEtBQVksRUFBRSxJQUFjLEVBQUUsS0FBYSxFQUFFLE1BQWlCLEVBQzlELE9BQW1CLEVBQ25CLEVBQUU7SUFDRixNQUFNLE9BQU8sR0FBRyxDQUFDLENBQUE7SUFFakIsTUFBTSxTQUFTLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQTtJQUMzQyxNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksR0FBRyxTQUFTLENBQUMsQ0FBQTtJQUN4QyxNQUFNLE9BQU8sR0FBRyxHQUFHLEdBQUcsU0FBUyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUE7SUFFeEQsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUMsTUFBTSxHQUFHLE9BQU8sR0FBRyxDQUFDLENBQUE7SUFDdEQsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBRyxPQUFPLEdBQUcsQ0FBQyxDQUFBO0lBQ3RDLE1BQU0sSUFBSSxHQUFHLEtBQUssR0FBRyxJQUFJLEdBQUcsT0FBTyxDQUFBO0lBQ25DLE1BQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQTtJQUVwQixNQUFNLEtBQUssR0FBRyxXQUFXLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQTtJQUMzQyxNQUFNLEtBQUssR0FBRyxXQUFXLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQTtJQUUzQyxJQUFJLENBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUE7SUFFN0MsTUFBTSxTQUFTLEdBQUcsY0FBYyxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQTtJQUUvQyxNQUFNLFVBQVUsR0FBRyxtQkFBbUIsQ0FDcEMsTUFBTSxFQUFFLElBQUksR0FBRyxPQUFPLEVBQUUsSUFBSSxHQUFHLE9BQU8sRUFBRSxPQUFPLEVBQUUsU0FBUyxDQUMzRCxDQUFBO0lBRUQsV0FBVyxDQUFDLFVBQVUsRUFBRSxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUE7QUFDeEMsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICBsYXlvdXRUZXh0TGluZSwgdGV4dExheW91dFRvSW5kaWNlc1xyXG59IGZyb20gJy4uLy4uL2xpYi9ibXBmb250L2xheW91dC5qcydcclxuaW1wb3J0IHsgQm1wRm9udE0sIEZvbnRQb2ludHMgfSBmcm9tICcuLi8uLi9saWIvYm1wZm9udC90eXBlcy5qcydcclxuaW1wb3J0IHsgY3JlYXRlQ29sb3IgfSBmcm9tICcuLi8uLi9saWIvaW1hZ2UvY29sb3IuanMnXHJcbmltcG9ydCB7IGZpbGwsIGZpbGxJbmRpY2VzIH0gZnJvbSAnLi4vLi4vbGliL2ltYWdlL2ZpbGwuanMnXHJcbmltcG9ydCB7IFN0YXRlIH0gZnJvbSAnLi4vLi4vbGliL3R5cGVzLmpzJ1xyXG5cclxuZXhwb3J0IGNvbnN0IGRyYXdGcHMgPSAoXHJcbiAgc3RhdGU6IFN0YXRlLCBmb250OiBCbXBGb250TSwgd2lkdGg6IG51bWJlciwgYnVmZmVyOiBJbWFnZURhdGEsXHJcbiAgZm9udFB0czogRm9udFBvaW50c1xyXG4pID0+IHtcclxuICBjb25zdCBwYWRkaW5nID0gMlxyXG5cclxuICBjb25zdCBmcmFtZVRpbWUgPSBzdGF0ZS50aW1lLmdldEZyYW1lVGltZSgpXHJcbiAgY29uc3QgZnBzID0gTWF0aC5yb3VuZCgxMDAwIC8gZnJhbWVUaW1lKVxyXG4gIGNvbnN0IGZwc1RleHQgPSBgJHtmcHN9IGZwcyAoJHtmcmFtZVRpbWUudG9GaXhlZCgxKX1tcylgXHJcblxyXG4gIGNvbnN0IGZwc1cgPSBmb250LndpZHRoICogZnBzVGV4dC5sZW5ndGggKyBwYWRkaW5nICogMlxyXG4gIGNvbnN0IGZwc0ggPSBmb250LmhlaWdodCArIHBhZGRpbmcgKiAyXHJcbiAgY29uc3QgZnBzWCA9IHdpZHRoIC0gZnBzVyAtIHBhZGRpbmdcclxuICBjb25zdCBmcHNZID0gcGFkZGluZ1xyXG5cclxuICBjb25zdCBmcHNCZyA9IGNyZWF0ZUNvbG9yKDB4MDAsIDB4NzgsIDB4ZDQpXHJcbiAgY29uc3QgZnBzRmcgPSBjcmVhdGVDb2xvcigweGZmLCAweGQ3LCAweDAwKVxyXG5cclxuICBmaWxsKGJ1ZmZlciwgZnBzQmcsIFtmcHNYLCBmcHNZLCBmcHNXLCBmcHNIXSlcclxuXHJcbiAgY29uc3QgZnBzTGF5b3V0ID0gbGF5b3V0VGV4dExpbmUoZm9udCwgZnBzVGV4dClcclxuXHJcbiAgY29uc3QgZnBzSW5kaWNlcyA9IHRleHRMYXlvdXRUb0luZGljZXMoXHJcbiAgICBidWZmZXIsIGZwc1ggKyBwYWRkaW5nLCBmcHNZICsgcGFkZGluZywgZm9udFB0cywgZnBzTGF5b3V0XHJcbiAgKVxyXG5cclxuICBmaWxsSW5kaWNlcyhmcHNJbmRpY2VzLCBidWZmZXIsIGZwc0ZnKVxyXG59XHJcbiJdfQ==