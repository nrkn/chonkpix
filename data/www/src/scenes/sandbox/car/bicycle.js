// bicycle style steering for car physics
export const createBicycle = (location = [0, 0], heading = 0, speed = 0, steerAngle = 0, wheelBase = 0) => ({ location, heading, speed, steerAngle, wheelBase });
export const frontWheel = (bicycle, center = bicycle.wheelBase / 2, cosHead = Math.cos(bicycle.heading), sinHead = Math.sin(bicycle.heading)) => [
    bicycle.location[0] + center * cosHead,
    bicycle.location[1] + center * sinHead
];
export const backWheel = (bicycle, center = bicycle.wheelBase / 2, cosHead = Math.cos(bicycle.heading), sinHead = Math.sin(bicycle.heading)) => [
    bicycle.location[0] - center * cosHead,
    bicycle.location[1] - center * sinHead
];
export const updateBicycle = (bicycle, delta) => {
    const center = bicycle.wheelBase / 2;
    const cosHead = Math.cos(bicycle.heading);
    const sinHead = Math.sin(bicycle.heading);
    let [bwx, bwy] = backWheel(bicycle, center, cosHead, sinHead);
    let [fwx, fwy] = frontWheel(bicycle, center, cosHead, sinHead);
    const ds = bicycle.speed * delta;
    const fa = bicycle.heading + bicycle.steerAngle;
    bwx += ds * cosHead;
    bwy += ds * sinHead;
    fwx += ds * Math.cos(fa);
    fwy += ds * Math.sin(fa);
    const location = [(fwx + bwx) / 2, (fwy + bwy) / 2];
    const heading = Math.atan2(fwy - bwy, fwx - bwx);
    return { location, heading };
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmljeWNsZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9zY2VuZXMvc2FuZGJveC9jYXIvYmljeWNsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSx5Q0FBeUM7QUFlekMsTUFBTSxDQUFDLE1BQU0sYUFBYSxHQUFHLENBQzNCLFdBQWUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsT0FBTyxHQUFHLENBQUMsRUFBRSxLQUFLLEdBQUcsQ0FBQyxFQUFFLFVBQVUsR0FBRyxDQUFDLEVBQUUsU0FBUyxHQUFHLENBQUMsRUFDbkUsRUFBRSxDQUFDLENBQUMsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FBQTtBQUVuRSxNQUFNLENBQUMsTUFBTSxVQUFVLEdBQUcsQ0FDeEIsT0FBZ0IsRUFDaEIsTUFBTSxHQUFHLE9BQU8sQ0FBQyxTQUFTLEdBQUcsQ0FBQyxFQUM5QixPQUFPLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQ25DLE9BQU8sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFDL0IsRUFBRSxDQUFDO0lBQ0wsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLEdBQUcsT0FBTztJQUN0QyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sR0FBRyxPQUFPO0NBQ3ZDLENBQUE7QUFFSCxNQUFNLENBQUMsTUFBTSxTQUFTLEdBQUcsQ0FDdkIsT0FBZ0IsRUFDaEIsTUFBTSxHQUFHLE9BQU8sQ0FBQyxTQUFTLEdBQUcsQ0FBQyxFQUM5QixPQUFPLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQ25DLE9BQU8sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFDL0IsRUFBRSxDQUFDO0lBQ0wsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLEdBQUcsT0FBTztJQUN0QyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sR0FBRyxPQUFPO0NBQ3ZDLENBQUE7QUFFSCxNQUFNLENBQUMsTUFBTSxhQUFhLEdBQUcsQ0FDM0IsT0FBZ0IsRUFBRSxLQUFhLEVBQ2hCLEVBQUU7SUFDakIsTUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUE7SUFDcEMsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDekMsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUE7SUFFekMsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsR0FBRyxTQUFTLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUE7SUFDN0QsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsR0FBRyxVQUFVLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUE7SUFFOUQsTUFBTSxFQUFFLEdBQUcsT0FBTyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUE7SUFDaEMsTUFBTSxFQUFFLEdBQUcsT0FBTyxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFBO0lBRS9DLEdBQUcsSUFBSSxFQUFFLEdBQUcsT0FBTyxDQUFBO0lBQ25CLEdBQUcsSUFBSSxFQUFFLEdBQUcsT0FBTyxDQUFBO0lBRW5CLEdBQUcsSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQTtJQUN4QixHQUFHLElBQUksRUFBRSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUE7SUFFeEIsTUFBTSxRQUFRLEdBQU8sQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUE7SUFDdkQsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQTtJQUVoRCxPQUFPLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxDQUFBO0FBQzlCLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIi8vIGJpY3ljbGUgc3R5bGUgc3RlZXJpbmcgZm9yIGNhciBwaHlzaWNzXG5cbmltcG9ydCB7IFQyIH0gZnJvbSAnLi4vLi4vLi4vbGliL3R5cGVzLmpzJ1xuXG5leHBvcnQgdHlwZSBCaWN5Y2xlVXBkYXRlID0ge1xuICBsb2NhdGlvbjogVDJcbiAgaGVhZGluZzogbnVtYmVyXG59XG5cbmV4cG9ydCB0eXBlIEJpY3ljbGUgPSBCaWN5Y2xlVXBkYXRlICYge1xuICBzcGVlZDogbnVtYmVyXG4gIHN0ZWVyQW5nbGU6IG51bWJlclxuICB3aGVlbEJhc2U6IG51bWJlclxufVxuXG5leHBvcnQgY29uc3QgY3JlYXRlQmljeWNsZSA9IChcbiAgbG9jYXRpb246IFQyID0gWzAsIDBdLCBoZWFkaW5nID0gMCwgc3BlZWQgPSAwLCBzdGVlckFuZ2xlID0gMCwgd2hlZWxCYXNlID0gMFxuKTogQmljeWNsZSA9PiAoeyBsb2NhdGlvbiwgaGVhZGluZywgc3BlZWQsIHN0ZWVyQW5nbGUsIHdoZWVsQmFzZSB9KVxuXG5leHBvcnQgY29uc3QgZnJvbnRXaGVlbCA9IChcbiAgYmljeWNsZTogQmljeWNsZSxcbiAgY2VudGVyID0gYmljeWNsZS53aGVlbEJhc2UgLyAyLFxuICBjb3NIZWFkID0gTWF0aC5jb3MoYmljeWNsZS5oZWFkaW5nKSxcbiAgc2luSGVhZCA9IE1hdGguc2luKGJpY3ljbGUuaGVhZGluZylcbik6IFQyID0+IFtcbiAgICBiaWN5Y2xlLmxvY2F0aW9uWzBdICsgY2VudGVyICogY29zSGVhZCxcbiAgICBiaWN5Y2xlLmxvY2F0aW9uWzFdICsgY2VudGVyICogc2luSGVhZFxuICBdXG5cbmV4cG9ydCBjb25zdCBiYWNrV2hlZWwgPSAoXG4gIGJpY3ljbGU6IEJpY3ljbGUsXG4gIGNlbnRlciA9IGJpY3ljbGUud2hlZWxCYXNlIC8gMixcbiAgY29zSGVhZCA9IE1hdGguY29zKGJpY3ljbGUuaGVhZGluZyksXG4gIHNpbkhlYWQgPSBNYXRoLnNpbihiaWN5Y2xlLmhlYWRpbmcpXG4pOiBUMiA9PiBbXG4gICAgYmljeWNsZS5sb2NhdGlvblswXSAtIGNlbnRlciAqIGNvc0hlYWQsXG4gICAgYmljeWNsZS5sb2NhdGlvblsxXSAtIGNlbnRlciAqIHNpbkhlYWRcbiAgXVxuXG5leHBvcnQgY29uc3QgdXBkYXRlQmljeWNsZSA9IChcbiAgYmljeWNsZTogQmljeWNsZSwgZGVsdGE6IG51bWJlclxuKTogQmljeWNsZVVwZGF0ZSA9PiB7XG4gIGNvbnN0IGNlbnRlciA9IGJpY3ljbGUud2hlZWxCYXNlIC8gMlxuICBjb25zdCBjb3NIZWFkID0gTWF0aC5jb3MoYmljeWNsZS5oZWFkaW5nKVxuICBjb25zdCBzaW5IZWFkID0gTWF0aC5zaW4oYmljeWNsZS5oZWFkaW5nKVxuXG4gIGxldCBbYnd4LCBid3ldID0gYmFja1doZWVsKGJpY3ljbGUsIGNlbnRlciwgY29zSGVhZCwgc2luSGVhZClcbiAgbGV0IFtmd3gsIGZ3eV0gPSBmcm9udFdoZWVsKGJpY3ljbGUsIGNlbnRlciwgY29zSGVhZCwgc2luSGVhZClcblxuICBjb25zdCBkcyA9IGJpY3ljbGUuc3BlZWQgKiBkZWx0YVxuICBjb25zdCBmYSA9IGJpY3ljbGUuaGVhZGluZyArIGJpY3ljbGUuc3RlZXJBbmdsZVxuXG4gIGJ3eCArPSBkcyAqIGNvc0hlYWRcbiAgYnd5ICs9IGRzICogc2luSGVhZFxuXG4gIGZ3eCArPSBkcyAqIE1hdGguY29zKGZhKVxuICBmd3kgKz0gZHMgKiBNYXRoLnNpbihmYSlcblxuICBjb25zdCBsb2NhdGlvbjogVDIgPSBbKGZ3eCArIGJ3eCkgLyAyLCAoZnd5ICsgYnd5KSAvIDJdXG4gIGNvbnN0IGhlYWRpbmcgPSBNYXRoLmF0YW4yKGZ3eSAtIGJ3eSwgZnd4IC0gYnd4KVxuXG4gIHJldHVybiB7IGxvY2F0aW9uLCBoZWFkaW5nIH1cbn0iXX0=