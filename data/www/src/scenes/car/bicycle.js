// bicycle style steering for car physics
export const createBicycle = (location = [0, 0], heading = 0, speed = 0, steerAngle = 0, wheelBase = 0) => ({ location, heading, speed, steerAngle, wheelBase });
export const frontWheel = (bicycle, center = bicycle.wheelBase / 2, cosHead = Math.cos(bicycle.heading), sinHead = Math.sin(bicycle.heading)) => [
    bicycle.location[0] + center * cosHead,
    bicycle.location[1] + center * sinHead
];
export const backWheel = (bicycle, center = bicycle.wheelBase / 2, cosHead = Math.cos(bicycle.heading), sinHead = Math.sin(bicycle.heading)) => [
    bicycle.location[0] - center * cosHead,
    bicycle.location[1] - center * sinHead
];
export const updateBicycle = (bicycle, delta) => {
    const center = bicycle.wheelBase / 2;
    const cosHead = Math.cos(bicycle.heading);
    const sinHead = Math.sin(bicycle.heading);
    let [bwx, bwy] = backWheel(bicycle, center, cosHead, sinHead);
    let [fwx, fwy] = frontWheel(bicycle, center, cosHead, sinHead);
    const ds = bicycle.speed * delta;
    const fa = bicycle.heading + bicycle.steerAngle;
    bwx += ds * cosHead;
    bwy += ds * sinHead;
    fwx += ds * Math.cos(fa);
    fwy += ds * Math.sin(fa);
    const location = [(fwx + bwx) / 2, (fwy + bwy) / 2];
    const heading = Math.atan2(fwy - bwy, fwx - bwx);
    return { location, heading };
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmljeWNsZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9zY2VuZXMvY2FyL2JpY3ljbGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEseUNBQXlDO0FBZXpDLE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBRyxDQUMzQixXQUFlLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLE9BQU8sR0FBRyxDQUFDLEVBQUUsS0FBSyxHQUFHLENBQUMsRUFBRSxVQUFVLEdBQUcsQ0FBQyxFQUFFLFNBQVMsR0FBRyxDQUFDLEVBQ25FLEVBQUUsQ0FBQyxDQUFDLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxDQUFDLENBQUE7QUFFbkUsTUFBTSxDQUFDLE1BQU0sVUFBVSxHQUFHLENBQ3hCLE9BQWdCLEVBQ2hCLE1BQU0sR0FBRyxPQUFPLENBQUMsU0FBUyxHQUFHLENBQUMsRUFDOUIsT0FBTyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUNuQyxPQUFPLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQy9CLEVBQUUsQ0FBQztJQUNMLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxHQUFHLE9BQU87SUFDdEMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLEdBQUcsT0FBTztDQUN2QyxDQUFBO0FBR0gsTUFBTSxDQUFDLE1BQU0sU0FBUyxHQUFHLENBQ3ZCLE9BQWdCLEVBQ2hCLE1BQU0sR0FBRyxPQUFPLENBQUMsU0FBUyxHQUFHLENBQUMsRUFDOUIsT0FBTyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUNuQyxPQUFPLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQy9CLEVBQUUsQ0FBQztJQUNMLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxHQUFHLE9BQU87SUFDdEMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLEdBQUcsT0FBTztDQUN2QyxDQUFBO0FBRUgsTUFBTSxDQUFDLE1BQU0sYUFBYSxHQUFHLENBQzNCLE9BQWdCLEVBQUUsS0FBYSxFQUNoQixFQUFFO0lBQ2pCLE1BQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFBO0lBQ3BDLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFBO0lBQ3pDLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFBO0lBRXpDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLEdBQUcsU0FBUyxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFBO0lBQzdELElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLEdBQUcsVUFBVSxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFBO0lBRTlELE1BQU0sRUFBRSxHQUFHLE9BQU8sQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFBO0lBQ2hDLE1BQU0sRUFBRSxHQUFHLE9BQU8sQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQTtJQUUvQyxHQUFHLElBQUksRUFBRSxHQUFHLE9BQU8sQ0FBQTtJQUNuQixHQUFHLElBQUksRUFBRSxHQUFHLE9BQU8sQ0FBQTtJQUVuQixHQUFHLElBQUksRUFBRSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUE7SUFDeEIsR0FBRyxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFBO0lBRXhCLE1BQU0sUUFBUSxHQUFPLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFBO0lBQ3ZELE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsRUFBRSxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUE7SUFFaEQsT0FBTyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsQ0FBQTtBQUM5QixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBiaWN5Y2xlIHN0eWxlIHN0ZWVyaW5nIGZvciBjYXIgcGh5c2ljc1xyXG5cclxuaW1wb3J0IHsgVDIgfSBmcm9tICcuLi8uLi9saWIvdHlwZXMuanMnXHJcblxyXG5leHBvcnQgdHlwZSBCaWN5Y2xlVXBkYXRlID0ge1xyXG4gIGxvY2F0aW9uOiBUMlxyXG4gIGhlYWRpbmc6IG51bWJlclxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBCaWN5Y2xlID0gQmljeWNsZVVwZGF0ZSAmIHtcclxuICBzcGVlZDogbnVtYmVyXHJcbiAgc3RlZXJBbmdsZTogbnVtYmVyXHJcbiAgd2hlZWxCYXNlOiBudW1iZXJcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZUJpY3ljbGUgPSAoXHJcbiAgbG9jYXRpb246IFQyID0gWzAsIDBdLCBoZWFkaW5nID0gMCwgc3BlZWQgPSAwLCBzdGVlckFuZ2xlID0gMCwgd2hlZWxCYXNlID0gMFxyXG4pOiBCaWN5Y2xlID0+ICh7IGxvY2F0aW9uLCBoZWFkaW5nLCBzcGVlZCwgc3RlZXJBbmdsZSwgd2hlZWxCYXNlIH0pXHJcblxyXG5leHBvcnQgY29uc3QgZnJvbnRXaGVlbCA9IChcclxuICBiaWN5Y2xlOiBCaWN5Y2xlLFxyXG4gIGNlbnRlciA9IGJpY3ljbGUud2hlZWxCYXNlIC8gMixcclxuICBjb3NIZWFkID0gTWF0aC5jb3MoYmljeWNsZS5oZWFkaW5nKSxcclxuICBzaW5IZWFkID0gTWF0aC5zaW4oYmljeWNsZS5oZWFkaW5nKVxyXG4pOiBUMiA9PiBbXHJcbiAgICBiaWN5Y2xlLmxvY2F0aW9uWzBdICsgY2VudGVyICogY29zSGVhZCxcclxuICAgIGJpY3ljbGUubG9jYXRpb25bMV0gKyBjZW50ZXIgKiBzaW5IZWFkXHJcbiAgXVxyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBiYWNrV2hlZWwgPSAoXHJcbiAgYmljeWNsZTogQmljeWNsZSxcclxuICBjZW50ZXIgPSBiaWN5Y2xlLndoZWVsQmFzZSAvIDIsXHJcbiAgY29zSGVhZCA9IE1hdGguY29zKGJpY3ljbGUuaGVhZGluZyksXHJcbiAgc2luSGVhZCA9IE1hdGguc2luKGJpY3ljbGUuaGVhZGluZylcclxuKTogVDIgPT4gW1xyXG4gICAgYmljeWNsZS5sb2NhdGlvblswXSAtIGNlbnRlciAqIGNvc0hlYWQsXHJcbiAgICBiaWN5Y2xlLmxvY2F0aW9uWzFdIC0gY2VudGVyICogc2luSGVhZFxyXG4gIF1cclxuXHJcbmV4cG9ydCBjb25zdCB1cGRhdGVCaWN5Y2xlID0gKFxyXG4gIGJpY3ljbGU6IEJpY3ljbGUsIGRlbHRhOiBudW1iZXJcclxuKTogQmljeWNsZVVwZGF0ZSA9PiB7XHJcbiAgY29uc3QgY2VudGVyID0gYmljeWNsZS53aGVlbEJhc2UgLyAyXHJcbiAgY29uc3QgY29zSGVhZCA9IE1hdGguY29zKGJpY3ljbGUuaGVhZGluZylcclxuICBjb25zdCBzaW5IZWFkID0gTWF0aC5zaW4oYmljeWNsZS5oZWFkaW5nKVxyXG5cclxuICBsZXQgW2J3eCwgYnd5XSA9IGJhY2tXaGVlbChiaWN5Y2xlLCBjZW50ZXIsIGNvc0hlYWQsIHNpbkhlYWQpXHJcbiAgbGV0IFtmd3gsIGZ3eV0gPSBmcm9udFdoZWVsKGJpY3ljbGUsIGNlbnRlciwgY29zSGVhZCwgc2luSGVhZClcclxuXHJcbiAgY29uc3QgZHMgPSBiaWN5Y2xlLnNwZWVkICogZGVsdGFcclxuICBjb25zdCBmYSA9IGJpY3ljbGUuaGVhZGluZyArIGJpY3ljbGUuc3RlZXJBbmdsZVxyXG5cclxuICBid3ggKz0gZHMgKiBjb3NIZWFkXHJcbiAgYnd5ICs9IGRzICogc2luSGVhZFxyXG5cclxuICBmd3ggKz0gZHMgKiBNYXRoLmNvcyhmYSlcclxuICBmd3kgKz0gZHMgKiBNYXRoLnNpbihmYSlcclxuXHJcbiAgY29uc3QgbG9jYXRpb246IFQyID0gWyhmd3ggKyBid3gpIC8gMiwgKGZ3eSArIGJ3eSkgLyAyXVxyXG4gIGNvbnN0IGhlYWRpbmcgPSBNYXRoLmF0YW4yKGZ3eSAtIGJ3eSwgZnd4IC0gYnd4KVxyXG5cclxuICByZXR1cm4geyBsb2NhdGlvbiwgaGVhZGluZyB9XHJcbn0iXX0=