import { countCells, generateGridLayout } from '../grid/index.js';
import { assrt } from '../util.js';
// for sheets where all tiles are same size and laid out uniformly.
// otherwise, write a custom function for the use case
export const createTileSheet = (image, cellW, cellH, names = [], gap = 0, padding = 0) => {
    const cols = countCells(image.width, cellW, gap, padding);
    const rows = countCells(image.height, cellH, gap, padding);
    const size = cols * rows;
    const grid = generateGridLayout(cellW, cellH, cols, rows, gap, padding);
    const tiles = {
        image,
        rects: Array(size),
        names: new Map()
    };
    for (let i = 0; i < size; i++) {
        const cell = grid.cells[i];
        tiles.rects[i] = [...cell, cellW, cellH];
        if (names[i]) {
            tiles.names.set(names[i], i);
        }
    }
    return tiles;
};
export const getTileIndex = (sheet, tileName) => assrt(sheet.names.get(tileName), `Tile ${tileName} not found`);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvbGliL3Nwcml0ZXMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxrQkFBa0IsRUFBRSxNQUFNLGtCQUFrQixDQUFBO0FBRWpFLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxZQUFZLENBQUE7QUFHbEMsbUVBQW1FO0FBQ25FLHNEQUFzRDtBQUN0RCxNQUFNLENBQUMsTUFBTSxlQUFlLEdBQUcsQ0FDN0IsS0FBZ0IsRUFBRSxLQUFhLEVBQUUsS0FBYSxFQUM5QyxRQUFrQixFQUFFLEVBQUUsR0FBRyxHQUFHLENBQUMsRUFBRSxPQUFPLEdBQUcsQ0FBQyxFQUMxQyxFQUFFO0lBQ0YsTUFBTSxJQUFJLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQTtJQUN6RCxNQUFNLElBQUksR0FBRyxVQUFVLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLE9BQU8sQ0FBQyxDQUFBO0lBQzFELE1BQU0sSUFBSSxHQUFHLElBQUksR0FBRyxJQUFJLENBQUE7SUFFeEIsTUFBTSxJQUFJLEdBQUcsa0JBQWtCLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQTtJQUV2RSxNQUFNLEtBQUssR0FBYztRQUN2QixLQUFLO1FBQ0wsS0FBSyxFQUFFLEtBQUssQ0FBSyxJQUFJLENBQUM7UUFDdEIsS0FBSyxFQUFFLElBQUksR0FBRyxFQUFrQjtLQUNqQyxDQUFBO0lBRUQsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1FBQzlCLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFFMUIsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQTtRQUV4QyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1lBQ2IsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO1FBQzlCLENBQUM7SUFDSCxDQUFDO0lBRUQsT0FBTyxLQUFLLENBQUE7QUFDZCxDQUFDLENBQUE7QUFFRCxNQUFNLENBQUMsTUFBTSxZQUFZLEdBQUcsQ0FBQyxLQUFnQixFQUFFLFFBQWdCLEVBQUUsRUFBRSxDQUNqRSxLQUFLLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLEVBQUUsUUFBUSxRQUFRLFlBQVksQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY291bnRDZWxscywgZ2VuZXJhdGVHcmlkTGF5b3V0IH0gZnJvbSAnLi4vZ3JpZC9pbmRleC5qcydcbmltcG9ydCB7IFQ0IH0gZnJvbSAnLi4vdHlwZXMuanMnXG5pbXBvcnQgeyBhc3NydCB9IGZyb20gJy4uL3V0aWwuanMnXG5pbXBvcnQgeyBUaWxlU2hlZXQgfSBmcm9tICcuL3R5cGVzLmpzJ1xuXG4vLyBmb3Igc2hlZXRzIHdoZXJlIGFsbCB0aWxlcyBhcmUgc2FtZSBzaXplIGFuZCBsYWlkIG91dCB1bmlmb3JtbHkuXG4vLyBvdGhlcndpc2UsIHdyaXRlIGEgY3VzdG9tIGZ1bmN0aW9uIGZvciB0aGUgdXNlIGNhc2VcbmV4cG9ydCBjb25zdCBjcmVhdGVUaWxlU2hlZXQgPSAoXG4gIGltYWdlOiBJbWFnZURhdGEsIGNlbGxXOiBudW1iZXIsIGNlbGxIOiBudW1iZXIsXG4gIG5hbWVzOiBzdHJpbmdbXSA9IFtdLCBnYXAgPSAwLCBwYWRkaW5nID0gMFxuKSA9PiB7XG4gIGNvbnN0IGNvbHMgPSBjb3VudENlbGxzKGltYWdlLndpZHRoLCBjZWxsVywgZ2FwLCBwYWRkaW5nKVxuICBjb25zdCByb3dzID0gY291bnRDZWxscyhpbWFnZS5oZWlnaHQsIGNlbGxILCBnYXAsIHBhZGRpbmcpXG4gIGNvbnN0IHNpemUgPSBjb2xzICogcm93c1xuXG4gIGNvbnN0IGdyaWQgPSBnZW5lcmF0ZUdyaWRMYXlvdXQoY2VsbFcsIGNlbGxILCBjb2xzLCByb3dzLCBnYXAsIHBhZGRpbmcpXG5cbiAgY29uc3QgdGlsZXM6IFRpbGVTaGVldCA9IHtcbiAgICBpbWFnZSxcbiAgICByZWN0czogQXJyYXk8VDQ+KHNpemUpLFxuICAgIG5hbWVzOiBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpXG4gIH1cblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemU7IGkrKykge1xuICAgIGNvbnN0IGNlbGwgPSBncmlkLmNlbGxzW2ldXG5cbiAgICB0aWxlcy5yZWN0c1tpXSA9IFsuLi5jZWxsLCBjZWxsVywgY2VsbEhdXG5cbiAgICBpZiAobmFtZXNbaV0pIHtcbiAgICAgIHRpbGVzLm5hbWVzLnNldChuYW1lc1tpXSwgaSlcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGlsZXNcbn1cblxuZXhwb3J0IGNvbnN0IGdldFRpbGVJbmRleCA9IChzaGVldDogVGlsZVNoZWV0LCB0aWxlTmFtZTogc3RyaW5nKSA9PlxuICBhc3NydChzaGVldC5uYW1lcy5nZXQodGlsZU5hbWUpLCBgVGlsZSAke3RpbGVOYW1lfSBub3QgZm91bmRgKVxuIl19