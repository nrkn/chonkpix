import { assrtPositive } from '../util.js';
export const animator = (frames) => {
    if (frames.length === 0)
        return () => null;
    const totalDuration = frames.reduce((acc, [duration]) => acc + assrtPositive(duration, 'Expected positive duration'), 0);
    if (totalDuration === 0)
        return () => null;
    const frameIdAt = (now) => {
        now = assrtPositive(now, 'Expected positive time') % totalDuration;
        for (let i = 0; i < frames.length; i++) {
            const [duration, id] = frames[i];
            if (now <= duration) {
                return id;
            }
            now -= duration;
        }
        return null;
    };
    return frameIdAt;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5pbWF0b3IuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvbGliL3Nwcml0ZXMvYW5pbWF0b3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLFlBQVksQ0FBQTtBQUcxQyxNQUFNLENBQUMsTUFBTSxRQUFRLEdBQUcsQ0FBYSxNQUEyQixFQUFFLEVBQUU7SUFDbEUsSUFBSSxNQUFNLENBQUMsTUFBTSxLQUFLLENBQUM7UUFBRSxPQUFPLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQTtJQUUxQyxNQUFNLGFBQWEsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUNqQyxDQUFDLEdBQUcsRUFBRSxDQUFDLFFBQVEsQ0FBQyxFQUFFLEVBQUUsQ0FDbEIsR0FBRyxHQUFHLGFBQWEsQ0FBQyxRQUFRLEVBQUUsNEJBQTRCLENBQUMsRUFDN0QsQ0FBQyxDQUNGLENBQUE7SUFFRCxJQUFJLGFBQWEsS0FBSyxDQUFDO1FBQUUsT0FBTyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUE7SUFFMUMsTUFBTSxTQUFTLEdBQUcsQ0FBQyxHQUFXLEVBQVksRUFBRTtRQUMxQyxHQUFHLEdBQUcsYUFBYSxDQUFDLEdBQUcsRUFBRSx3QkFBd0IsQ0FBQyxHQUFHLGFBQWEsQ0FBQTtRQUVsRSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ3ZDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFBO1lBRWhDLElBQUksR0FBRyxJQUFJLFFBQVEsRUFBRSxDQUFDO2dCQUNwQixPQUFPLEVBQUUsQ0FBQTtZQUNYLENBQUM7WUFFRCxHQUFHLElBQUksUUFBUSxDQUFBO1FBQ2pCLENBQUM7UUFFRCxPQUFPLElBQUksQ0FBQTtJQUNiLENBQUMsQ0FBQTtJQUVELE9BQU8sU0FBUyxDQUFBO0FBQ2xCLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1heWJlIH0gZnJvbSAnLi4vdHlwZXMuanMnXG5pbXBvcnQgeyBhc3NydFBvc2l0aXZlIH0gZnJvbSAnLi4vdXRpbC5qcydcbmltcG9ydCB7IEFuaW1hdGlvbkZyYW1lIH0gZnJvbSAnLi90eXBlcy5qcydcblxuZXhwb3J0IGNvbnN0IGFuaW1hdG9yID0gPFQgPSBudW1iZXI+KGZyYW1lczogQW5pbWF0aW9uRnJhbWU8VD5bXSkgPT4ge1xuICBpZiAoZnJhbWVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuICgpID0+IG51bGxcblxuICBjb25zdCB0b3RhbER1cmF0aW9uID0gZnJhbWVzLnJlZHVjZShcbiAgICAoYWNjLCBbZHVyYXRpb25dKSA9PlxuICAgICAgYWNjICsgYXNzcnRQb3NpdGl2ZShkdXJhdGlvbiwgJ0V4cGVjdGVkIHBvc2l0aXZlIGR1cmF0aW9uJyksXG4gICAgMFxuICApXG5cbiAgaWYgKHRvdGFsRHVyYXRpb24gPT09IDApIHJldHVybiAoKSA9PiBudWxsXG5cbiAgY29uc3QgZnJhbWVJZEF0ID0gKG5vdzogbnVtYmVyKTogTWF5YmU8VD4gPT4ge1xuICAgIG5vdyA9IGFzc3J0UG9zaXRpdmUobm93LCAnRXhwZWN0ZWQgcG9zaXRpdmUgdGltZScpICUgdG90YWxEdXJhdGlvblxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmcmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IFtkdXJhdGlvbiwgaWRdID0gZnJhbWVzW2ldXG5cbiAgICAgIGlmIChub3cgPD0gZHVyYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGlkXG4gICAgICB9XG5cbiAgICAgIG5vdyAtPSBkdXJhdGlvblxuICAgIH1cblxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICByZXR1cm4gZnJhbWVJZEF0XG59XG4iXX0=