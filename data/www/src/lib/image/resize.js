import { clampRect } from './util.js';
// nearest neighbor scaling
export const resize = (src, dest, srcRect = [0, 0, src.width, src.height], destRect = [0, 0, dest.width, dest.height]) => {
    const [sx, sy, sw, sh] = clampRect(src.width, src.height, srcRect);
    const [dx, dy, dw, dh] = clampRect(dest.width, dest.height, destRect);
    const scaleW = sw / dw;
    const scaleH = sh / dh;
    const srcData = new Uint32Array(src.data.buffer);
    const destData = new Uint32Array(dest.data.buffer);
    for (let y = 0; y < dh; y++) {
        const srcY = Math.floor(y * scaleH) + sy;
        for (let x = 0; x < dw; x++) {
            const srcX = Math.floor(x * scaleW) + sx;
            const srcIndex = srcY * src.width + srcX;
            const destIndex = (y + dy) * dest.width + (x + dx);
            destData[destIndex] = srcData[srcIndex];
        }
    }
    return dest;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzaXplLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9pbWFnZS9yZXNpemUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLFdBQVcsQ0FBQTtBQUVyQywyQkFBMkI7QUFDM0IsTUFBTSxDQUFDLE1BQU0sTUFBTSxHQUFHLENBQ3BCLEdBQWMsRUFBRSxJQUFlLEVBQy9CLFVBQWMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUMzQyxXQUFlLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsRUFDOUMsRUFBRTtJQUNGLE1BQU0sQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsR0FBRyxTQUFTLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFBO0lBQ2xFLE1BQU0sQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsR0FBRyxTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLFFBQVEsQ0FBQyxDQUFBO0lBRXJFLE1BQU0sTUFBTSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUE7SUFDdEIsTUFBTSxNQUFNLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQTtJQUV0QixNQUFNLE9BQU8sR0FBRyxJQUFJLFdBQVcsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFBO0lBQ2hELE1BQU0sUUFBUSxHQUFHLElBQUksV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUE7SUFFbEQsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1FBQzVCLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQTtRQUV4QyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7WUFDNUIsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFBO1lBRXhDLE1BQU0sUUFBUSxHQUFHLElBQUksR0FBRyxHQUFHLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQTtZQUN4QyxNQUFNLFNBQVMsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFBO1lBRWxELFFBQVEsQ0FBQyxTQUFTLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUE7UUFDekMsQ0FBQztJQUNILENBQUM7SUFFRCxPQUFPLElBQUksQ0FBQTtBQUNiLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFQ0IH0gZnJvbSAnLi4vdHlwZXMuanMnXG5pbXBvcnQgeyBjbGFtcFJlY3QgfSBmcm9tICcuL3V0aWwuanMnXG5cbi8vIG5lYXJlc3QgbmVpZ2hib3Igc2NhbGluZ1xuZXhwb3J0IGNvbnN0IHJlc2l6ZSA9IChcbiAgc3JjOiBJbWFnZURhdGEsIGRlc3Q6IEltYWdlRGF0YSxcbiAgc3JjUmVjdDogVDQgPSBbMCwgMCwgc3JjLndpZHRoLCBzcmMuaGVpZ2h0XSxcbiAgZGVzdFJlY3Q6IFQ0ID0gWzAsIDAsIGRlc3Qud2lkdGgsIGRlc3QuaGVpZ2h0XVxuKSA9PiB7XG4gIGNvbnN0IFtzeCwgc3ksIHN3LCBzaF0gPSBjbGFtcFJlY3Qoc3JjLndpZHRoLCBzcmMuaGVpZ2h0LCBzcmNSZWN0KVxuICBjb25zdCBbZHgsIGR5LCBkdywgZGhdID0gY2xhbXBSZWN0KGRlc3Qud2lkdGgsIGRlc3QuaGVpZ2h0LCBkZXN0UmVjdClcblxuICBjb25zdCBzY2FsZVcgPSBzdyAvIGR3XG4gIGNvbnN0IHNjYWxlSCA9IHNoIC8gZGhcblxuICBjb25zdCBzcmNEYXRhID0gbmV3IFVpbnQzMkFycmF5KHNyYy5kYXRhLmJ1ZmZlcilcbiAgY29uc3QgZGVzdERhdGEgPSBuZXcgVWludDMyQXJyYXkoZGVzdC5kYXRhLmJ1ZmZlcilcblxuICBmb3IgKGxldCB5ID0gMDsgeSA8IGRoOyB5KyspIHtcbiAgICBjb25zdCBzcmNZID0gTWF0aC5mbG9vcih5ICogc2NhbGVIKSArIHN5XG5cbiAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGR3OyB4KyspIHtcbiAgICAgIGNvbnN0IHNyY1ggPSBNYXRoLmZsb29yKHggKiBzY2FsZVcpICsgc3hcblxuICAgICAgY29uc3Qgc3JjSW5kZXggPSBzcmNZICogc3JjLndpZHRoICsgc3JjWFxuICAgICAgY29uc3QgZGVzdEluZGV4ID0gKHkgKyBkeSkgKiBkZXN0LndpZHRoICsgKHggKyBkeClcblxuICAgICAgZGVzdERhdGFbZGVzdEluZGV4XSA9IHNyY0RhdGFbc3JjSW5kZXhdXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGRlc3Rcbn1cbiJdfQ==