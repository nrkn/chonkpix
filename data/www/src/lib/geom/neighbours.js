import { maybe } from '../util.js';
const hashPoint = ([x, y]) => (x << 16) | y;
const cardCache = new Map();
const ordCache = new Map();
const allCache = new Map();
export const getNeighboursCardinal = (pt) => {
    const hash = hashPoint(pt);
    let points = cardCache.get(hash);
    if (maybe(points))
        return points;
    const [x, y] = pt;
    const t = y - 1;
    const r = x + 1;
    const b = y + 1;
    const l = x - 1;
    // t, r, b, l
    const pts = [
        [x, t], [r, y], [x, b], [l, y]
    ];
    cardCache.set(hash, pts);
    return pts;
};
export const getNeighboursOrdinal = (pt) => {
    const hash = hashPoint(pt);
    let points = ordCache.get(hash);
    if (maybe(points))
        return points;
    const [x, y] = pt;
    const t = y - 1;
    const r = x + 1;
    const b = y + 1;
    const l = x - 1;
    // tr, br, bl, tl
    const pts = [
        [r, t], [r, b], [l, b], [l, t]
    ];
    ordCache.set(hash, pts);
    return pts;
};
export const getNeighboursAll = (pt) => {
    const hash = hashPoint(pt);
    let points = allCache.get(hash);
    if (maybe(points))
        return points;
    const [x, y] = pt;
    const t = y - 1;
    const r = x + 1;
    const b = y + 1;
    const l = x - 1;
    // t, tr, r, br, b, bl, l, tl
    const pts = [
        [x, t], [r, t], [r, y], [r, b],
        [x, b], [l, b], [l, y], [l, t]
    ];
    allCache.set(hash, pts);
    return pts;
};
export const getNeighbours = (pt, type = 'all') => {
    switch (type) {
        case 'cardinal': return getNeighboursCardinal(pt);
        case 'ordinal': return getNeighboursOrdinal(pt);
        case 'all': return getNeighboursAll(pt);
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmVpZ2hib3Vycy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9saWIvZ2VvbS9uZWlnaGJvdXJzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxZQUFZLENBQUE7QUFHbEMsTUFBTSxTQUFTLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUssRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFBO0FBRS9DLE1BQU0sU0FBUyxHQUFHLElBQUksR0FBRyxFQUFnQixDQUFBO0FBQ3pDLE1BQU0sUUFBUSxHQUFHLElBQUksR0FBRyxFQUFnQixDQUFBO0FBQ3hDLE1BQU0sUUFBUSxHQUFHLElBQUksR0FBRyxFQUFnQixDQUFBO0FBRXhDLE1BQU0sQ0FBQyxNQUFNLHFCQUFxQixHQUFHLENBQUMsRUFBTSxFQUFRLEVBQUU7SUFDcEQsTUFBTSxJQUFJLEdBQUcsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFBO0lBRTFCLElBQUksTUFBTSxHQUFHLFNBQVMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUE7SUFFaEMsSUFBSSxLQUFLLENBQUMsTUFBTSxDQUFDO1FBQUUsT0FBTyxNQUFNLENBQUE7SUFFaEMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUE7SUFFakIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQTtJQUNmLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUE7SUFDZixNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBQ2YsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQTtJQUVmLGFBQWE7SUFDYixNQUFNLEdBQUcsR0FBUztRQUNoQixDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFB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LE9BQU8sb0JBQW9CLENBQUMsRUFBRSxDQUFDLENBQUE7UUFDL0MsS0FBSyxLQUFLLENBQUMsQ0FBQyxPQUFPLGdCQUFnQixDQUFDLEVBQUUsQ0FBQyxDQUFBO0lBQ3pDLENBQUM7QUFDSCxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUMiB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuaW1wb3J0IHsgbWF5YmUgfSBmcm9tICcuLi91dGlsLmpzJ1xuaW1wb3J0IHsgTmVpZ2hib3VyVHlwZSB9IGZyb20gJy4vdHlwZXMuanMnXG5cbmNvbnN0IGhhc2hQb2ludCA9IChbeCwgeV06IFQyKSA9PiAoeCA8PCAxNikgfCB5XG5cbmNvbnN0IGNhcmRDYWNoZSA9IG5ldyBNYXA8bnVtYmVyLCBUMltdPigpXG5jb25zdCBvcmRDYWNoZSA9IG5ldyBNYXA8bnVtYmVyLCBUMltdPigpXG5jb25zdCBhbGxDYWNoZSA9IG5ldyBNYXA8bnVtYmVyLCBUMltdPigpXG5cbmV4cG9ydCBjb25zdCBnZXROZWlnaGJvdXJzQ2FyZGluYWwgPSAocHQ6IFQyKTogVDJbXSA9PiB7XG4gIGNvbnN0IGhhc2ggPSBoYXNoUG9pbnQocHQpXG5cbiAgbGV0IHBvaW50cyA9IGNhcmRDYWNoZS5nZXQoaGFzaClcblxuICBpZiAobWF5YmUocG9pbnRzKSkgcmV0dXJuIHBvaW50c1xuXG4gIGNvbnN0IFt4LCB5XSA9IHB0XG5cbiAgY29uc3QgdCA9IHkgLSAxXG4gIGNvbnN0IHIgPSB4ICsgMVxuICBjb25zdCBiID0geSArIDFcbiAgY29uc3QgbCA9IHggLSAxXG5cbiAgLy8gdCwgciwgYiwgbFxuICBjb25zdCBwdHM6IFQyW10gPSBbXG4gICAgW3gsIHRdLCBbciwgeV0sIFt4LCBiXSwgW2wsIHldXG4gIF1cblxuICBjYXJkQ2FjaGUuc2V0KGhhc2gsIHB0cylcblxuICByZXR1cm4gcHRzXG59XG5cbmV4cG9ydCBjb25zdCBnZXROZWlnaGJvdXJzT3JkaW5hbCA9IChwdDogVDIpOiBUMltdID0+IHtcbiAgY29uc3QgaGFzaCA9IGhhc2hQb2ludChwdClcblxuICBsZXQgcG9pbnRzID0gb3JkQ2FjaGUuZ2V0KGhhc2gpXG5cbiAgaWYgKG1heWJlKHBvaW50cykpIHJldHVybiBwb2ludHNcblxuICBjb25zdCBbeCwgeV0gPSBwdFxuXG4gIGNvbnN0IHQgPSB5IC0gMVxuICBjb25zdCByID0geCArIDFcbiAgY29uc3QgYiA9IHkgKyAxXG4gIGNvbnN0IGwgPSB4IC0gMVxuXG4gIC8vIHRyLCBiciwgYmwsIHRsXG4gIGNvbnN0IHB0czogVDJbXSA9IFtcbiAgICBbciwgdF0sIFtyLCBiXSwgW2wsIGJdLCBbbCwgdF1cbiAgXVxuXG4gIG9yZENhY2hlLnNldChoYXNoLCBwdHMpXG5cbiAgcmV0dXJuIHB0c1xufVxuXG5leHBvcnQgY29uc3QgZ2V0TmVpZ2hib3Vyc0FsbCA9IChwdDogVDIpOiBUMltdID0+IHtcbiAgY29uc3QgaGFzaCA9IGhhc2hQb2ludChwdClcblxuICBsZXQgcG9pbnRzID0gYWxsQ2FjaGUuZ2V0KGhhc2gpXG5cbiAgaWYgKG1heWJlKHBvaW50cykpIHJldHVybiBwb2ludHNcblxuICBjb25zdCBbeCwgeV0gPSBwdFxuXG4gIGNvbnN0IHQgPSB5IC0gMVxuICBjb25zdCByID0geCArIDFcbiAgY29uc3QgYiA9IHkgKyAxXG4gIGNvbnN0IGwgPSB4IC0gMVxuXG4gIC8vIHQsIHRyLCByLCBiciwgYiwgYmwsIGwsIHRsXG4gIGNvbnN0IHB0czogVDJbXSA9IFtcbiAgICBbeCwgdF0sIFtyLCB0XSwgW3IsIHldLCBbciwgYl0sXG4gICAgW3gsIGJdLCBbbCwgYl0sIFtsLCB5XSwgW2wsIHRdXG4gIF1cblxuICBhbGxDYWNoZS5zZXQoaGFzaCwgcHRzKVxuXG4gIHJldHVybiBwdHNcbn1cblxuZXhwb3J0IGNvbnN0IGdldE5laWdoYm91cnMgPSAocHQ6IFQyLCB0eXBlOiBOZWlnaGJvdXJUeXBlID0gJ2FsbCcpOiBUMltdID0+IHtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAnY2FyZGluYWwnOiByZXR1cm4gZ2V0TmVpZ2hib3Vyc0NhcmRpbmFsKHB0KVxuICAgIGNhc2UgJ29yZGluYWwnOiByZXR1cm4gZ2V0TmVpZ2hib3Vyc09yZGluYWwocHQpXG4gICAgY2FzZSAnYWxsJzogcmV0dXJuIGdldE5laWdoYm91cnNBbGwocHQpXG4gIH1cbn1cbiJdfQ==